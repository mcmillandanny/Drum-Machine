{"version":3,"sources":["main.js"],"names":["console","log","AudioContext","window","webkitAudioContext","audioCtx","analyser","createAnalyser","kickAudio","document","querySelector","snareAudio","clapAudio","hihatAudio","kickTrack","createMediaElementSource","snareTrack","clapTrack","hihatTrack","kickPlayBtn","snarePlayBtn","clapPlayBtn","hihatPlayBtn","lowShelfFilter","createBiquadFilter","type","gain","value","frequency","addEventListener","connect","destination","state","resume","play","pannerOptions","pan","panner","StereoPannerNode","panSlider","WIDTH","HEIGHT","fftSize","bufferLength","frequencyBinCount","dataArray","Uint8Array","getByteTimeDomainData","canvasCtx","getContext","clearRect","draw","fillStyle","fillRect","lineWidth","strokeStyle","beginPath","sliceWidth","x","i","v","y","moveTo","lineTo","width","height","stroke","requestAnimationFrame"],"mappings":"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","file":"main.js","sourcesContent":["console.log(\"Drum Machine\");\n\n\n\n// for cross browser\n\nconst AudioContext = window.AudioContext || window.webkitAudioContext;\nconst audioCtx = new AudioContext();\nconst analyser = audioCtx.createAnalyser();\n\n\n\n// load some sound\nconst kickAudio = document.querySelector('audio.kickAudio');\nconst snareAudio = document.querySelector('audio.snareAudio');\nconst clapAudio = document.querySelector('audio.clapAudio');\nconst hihatAudio = document.querySelector('audio.hihatAudio');\n\n\n\nconst kickTrack = audioCtx.createMediaElementSource(kickAudio);\nconst snareTrack = audioCtx.createMediaElementSource(snareAudio);\nconst clapTrack = audioCtx.createMediaElementSource(clapAudio);\nconst hihatTrack = audioCtx.createMediaElementSource(hihatAudio);\n\n\nconst kickPlayBtn = document.querySelector('.kickPlayButton');\nconst snarePlayBtn = document.querySelector('.snarePlayButton');\nconst clapPlayBtn = document.querySelector('.clapPlayButton');\nconst hihatPlayBtn = document.querySelector('.hihatPlayButton');\n\n\n\nlet lowShelfFilter = audioCtx.createBiquadFilter();\nlowShelfFilter.type = \"lowshelf\";\nlowShelfFilter.gain.value = 0;\nlowShelfFilter.frequency.value = 4000;\n\n\n\n\n\n// make range slider control lowShelfFilter.frequency.value\ndocument.querySelector('.lowShelfSlider').addEventListener('change', function() {\n    lowShelfFilter.gain.value = this.value;\n})\n\nkickTrack\n    .connect(analyser) \n    .connect(lowShelfFilter) \n    .connect(audioCtx.destination)\n\nsnareTrack\n    .connect(analyser) \n    .connect(lowShelfFilter)\n    .connect(audioCtx.destination)\n    \n\nclapTrack \n    .connect(analyser) \n    .connect(lowShelfFilter)\n    .connect(audioCtx.destination)\n    \n    \n\nhihatTrack\n    .connect(analyser)    \n    .connect(lowShelfFilter)\n    .connect(audioCtx.destination)\n    \n   \n\n\n\n// play pause audio\n\nkickPlayBtn.addEventListener(\"click\", function() {\n\n    if (audioCtx.state === 'suspended') {\n        audioCtx.resume();\n    }\n    // audioCtx.play();\n    kickAudio.play();\n\n})\n\nsnarePlayBtn.addEventListener(\"click\", function() {\n\n    if (audioCtx.state === 'suspended') {\n        audioCtx.resume();\n    }\n    // audioCtx.play();\n    snareAudio.play();\n\n})\n\nclapPlayBtn.addEventListener(\"click\", function() {\n\n    if (audioCtx.state === 'suspended') {\n        audioCtx.resume();\n    }\n    // audioCtx.play();\n    clapAudio.play();\n\n})\n\nhihatPlayBtn.addEventListener(\"click\", function () {\n\n    if (audioCtx.state === 'suspended') {\n        audioCtx.resume();\n    }\n    // audioCtx.play();\n    hihatAudio.play();\n\n})\n\n\n// volume\n    // const gainNode = audioCtx.createGain();\n\n    // const volumeControl = document.querySelector('[data-action=\"volume\"]');\n    // volumeControl.addEventListener('input', function() {\n    //     gainNode.gain.value = this.value;\n    // }, false);\n\n// panning\nconst pannerOptions = {pan: 0};\nconst panner = new StereoPannerNode(audioCtx, pannerOptions);\nlet panSlider = document.querySelector('[data-action=\"panner\"]');\n\n\npanSlider.addEventListener('input', function() {\n    panner.pan.value = panSlider.value; \n\n\n})\n\n\n\n\n\n\n\n\n\n// canvas visualizer experiment \n\nlet WIDTH = 500;\nlet HEIGHT = 500;\n\nanalyser.fftSize = 2048;\nvar bufferLength = analyser.frequencyBinCount;\nvar dataArray = new Uint8Array(bufferLength);\n\nanalyser.getByteTimeDomainData(dataArray);\n\n\nlet canvasCtx = document.querySelector('#visualizer-canvas').getContext('2d');\ncanvasCtx.clearRect(0, 0, WIDTH, HEIGHT);\n\n\n\nfunction draw() {\n    // console.log(\"draw function!\")\n    analyser.getByteTimeDomainData(dataArray);\n    canvasCtx.fillStyle = 'rgb(100, 100, 100)';\n    canvasCtx.fillRect(0, 0, WIDTH, HEIGHT);\n    canvasCtx.lineWidth = 2;\n    canvasCtx.strokeStyle = 'rgb(20, 20, 20)';\n    canvasCtx.beginPath();\n    var sliceWidth = WIDTH * 1.0 / bufferLength;\n    var x = 0;\n\n\n    for(var i = 0; i < bufferLength; i++) {\n        \n        var v = dataArray[i] / 128.0;\n        var y = v * HEIGHT/2;\n        \n        if(i === 0) {\n            canvasCtx.moveTo(x, y);\n        } else {\n            canvasCtx.lineTo(x, y);\n        }\n        \n        x += sliceWidth;\n    }\n    \n    for(var i = 0; i < bufferLength; i++) {\n        \n        var v = dataArray[i] / 128.0;\n        var y = v * HEIGHT/2;\n        \n        if(i === 0) {\n            canvasCtx.moveTo(x, y);\n        } else {\n            canvasCtx.lineTo(x, y);\n        }\n        \n        x += sliceWidth;\n    }\n    \n    canvasCtx.lineTo(canvasCtx.width, canvasCtx.height/2);\n    canvasCtx.stroke();\n    \n    requestAnimationFrame(draw);\n    \n};\n\ndraw()\n\n// console.log(bufferLength)\n\n\n\n"]}